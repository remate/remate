define("base/utils",["jquery","amaze","underscore"],function(b,c,d){var e={api:{logout:function(a,b){var c=this;$.ajax({url:host+"/logout",type:"POST",dataType:"json",success:function(a){a.errorCode==200?($(window).off("beforeunload.pro"),e.tool.goLogin(1)):b&&b(a.moreInfo)},error:function(a){b&&b("服务器暂时没有相应，请稍后重试...")}})},move:function(a,b){var c=this;$.ajax({url:host+"/shop/movestart",type:"POST",dataType:"json",success:function(c){c.errorCode==200?a&&a(c):b&&b(c.moreInfo)},error:function(a){a.status==401?e.tool.goLogin():b&&b("服务器暂时没有相应，请稍后重试...")}})},moveAgain:function(a,b,c){var d=this;$.ajax({url:host+"/shop/step5",data:{shopUrl:a.shopUrl,option:a.option},type:"POST",dataType:"json",success:function(a){a.errorCode==200?b&&b(a):c&&c(a.moreInfo)},error:function(a){a.status==401?e.tool.goLogin():c&&c("服务器暂时没有相应，请稍后重试...")}})},checkMoveCode:function(a,b,c,d){var f=this;$.ajax({url:host+"/shop/step2check",type:"POST",dataType:"json",data:{rnd:a,itemId:b},success:function(a){a.errorCode==200?c&&c(a):d&&d(a.moreInfo)},error:function(a){a.status==401?e.tool.goLogin():d&&d("服务器暂时没有相应，请稍后重试...")}})},getAddressParent:function(a,b,c){if(!a)return!1;$.ajax({url:host+"/zone/"+a+"/parents",type:"POST",dataType:"json",success:function(a){a.data.length?b&&b(a):c&&c()},error:function(a){a.status==401?e.tool.goLogin():c&&c("服务器暂时没有相应，请稍后重试...")}})},address:function(a,b,c){if(!a)return;var d=this;$.ajax({url:host+"/zone/"+a+"/children",type:"POST",dataType:"json",success:function(a){a.data.length?b&&b(a):c&&c(a.moreInfo)},error:function(a){a.status==401?e.tool.goLogin():c&&c("服务器暂时没有相应，请稍后重试...")}})},getShopInfo:function(a,b,c){var d=this;$.ajax({url:host+"/shop/"+a,type:"POST",dataType:"json",success:function(a){a.errorCode==200?b&&b(a):c&&c(a.moreInfo)},error:function(a){a.status==401?e.tool.goLogin():c&&c("服务器暂时没有相应，请稍后重试...")}})},updateShop:function(a,b,c){var d=this;$.ajax({url:host+"/shop/update",type:"POST",data:a,dataType:"json",success:function(a){a.errorCode==200?b&&b(a):c&&c(a.moreInfo)},error:function(a){a.status==401?e.tool.goLogin():c&&c("服务器暂时没有相应，请稍后重试...")}})},editMobile:function(a,b,c){var d=this;$.ajax({url:host+"/shop/saveMobileAndTel",type:"POST",data:a,dataType:"json",success:function(a){a.errorCode==200?b&&b(a):c&&c(a.moreInfo)},error:function(a){a.status==401?e.tool.goLogin():c&&c("服务器暂时没有相应，请稍后重试...")}})},updatePostAge:function(a,b,c){var d=this;$.ajax({url:host+"/shop/updatePostageSet",type:"POST",data:a,dataType:"json",success:function(a){a.errorCode==200?b&&b(a):c&&c(a.moreInfo)},error:function(a){a.status==401?e.tool.goLogin():c&&c("服务器暂时没有相应，请稍后重试...")}})},saveDesc:function(a,b,c){var d=this;$.ajax({url:host+"/fragment/save",type:"POST",data:a,dataType:"json",success:function(a){a.errorCode==200?b&&b(a):c&&c(a.moreInfo)},error:function(a){a.status==401?e.tool.goLogin():c&&c("服务器暂时没有相应，请稍后重试...")}})},delDesc:function(a,b,c){var d=this;$.ajax({url:host+"/fragment/delete",type:"POST",data:{id:a},dataType:"json",success:function(a){a.errorCode==200?b&&b(a):c&&c(a.moreInfo)},error:function(a){a.status==401?e.tool.goLogin():c&&c("服务器暂时没有相应，请稍后重试...")}})},setFragment:function(a,b,c){var d=this;$.ajax({url:host+"/shop/set_fragment",type:"POST",data:{enable:a},dataType:"json",success:function(a){a.errorCode==200?b&&b(a):c&&c(a.moreInfo)},error:function(a){a.status==401?e.tool.goLogin():c&&c("服务器暂时没有相应，请稍后重试...")}})},setFragmentIdx:function(a,b,c){var d=this;$.ajax({url:host+"/fragment/saveIdx",type:"POST",data:{ids:a},dataType:"json",success:function(a){a.errorCode==200?b&&b(a):c&&c(a.moreInfo)},error:function(a){a.status==401?e.tool.goLogin():c&&c("服务器暂时没有相应，请稍后重试...")}})},getFragList:function(a,b){var c=this;$.ajax({url:host+"/fragment/list",type:"POST",dataType:"json",success:function(c){c.errorCode==200?a&&a(c):b&&b(c.moreInfo)},error:function(a){a.status==401?e.tool.goLogin():b&&b("服务器暂时没有相应，请稍后重试...")}})},changeEnableDesc:function(a,b,c){var d=this;$.ajax({url:host+"/product/changeEnableDesc",type:"POST",data:a,dataType:"json",success:function(a){a.errorCode==200?b&&b(a):c&&c(a.moreInfo)},error:function(a){a.status==401?e.tool.goLogin():c&&c("服务器暂时没有相应，请稍后重试...")}})},saveProductDesc:function(a,b,c){var d=this;$.ajax({url:host+"/product/saveProductDesc",type:"POST",data:a,dataType:"json",success:function(a){a.errorCode==200?b&&b(a):c&&c(a.moreInfo)},error:function(a){a.status==401?e.tool.goLogin():c&&c("服务器暂时没有相应，请稍后重试...")}})},saveProductFragment:function(a,b,c){var d=this;$.ajax({url:host+"/productFragment/save",type:"POST",data:a,dataType:"json",success:function(a){a.errorCode==200?b&&b(a):c&&c(a.moreInfo)},error:function(a){a.status==401?e.tool.goLogin():c&&c("服务器暂时没有相应，请稍后重试...")}})},saveProduct:function(a,b,c){var d=this;$.ajax({url:host+"/product/save",type:"POST",data:a,dataType:"json",success:function(a){a.errorCode==200?b&&b(a):c&&c(a.moreInfo)},error:function(a){a.status==401?e.tool.goLogin():c&&c("服务器暂时没有相应，请稍后重试...")}})},getProductInfo:function(a,b,c){var d=this;$.ajax({url:host+"/product/"+a,type:"POST",dataType:"json",success:function(a){a.errorCode==200?b&&b(a):c&&c(a.moreInfo)},error:function(a){a.status==401?e.tool.goLogin():c&&c("服务器暂时没有相应，请稍后重试...")}})},getProductList:function(a,b,c,d){var f=this,g="";switch(a){case"onsale":g="/product/list";break;case"draft":g="/product/list",b.order="statusDraft";break;case"delay":g="/product/list/forsalebyPC";break;case"offsale":g="/product/list",b.order="soldout";break;case"search":g="/product/searchbyPc/"+window.shopId+"/"+b.keyword,delete b.keyword;break;default:g="/product/list"}var h={order:"",direction:"",pageable:!0,page:0,size:8};$.extend(h,b),$.ajax({url:host+g,type:"POST",data:h,dataType:"json",success:function(b){b.errorCode==200?(b.type=a,c&&c(b)):d&&d(b.moreInfo)},error:function(a){a.status==401?e.tool.goLogin():d&&d("服务器暂时没有相应，请稍后重试...")}})},batchInstock:function(a,b,c){var d=this,f={ids:a.join(",")};$.ajax({url:host+"/product/batch-instock",type:"POST",data:f,dataType:"json",success:function(a){a.errorCode==200?b&&b(a):c&&c(a.moreInfo)},error:function(a){a.status==401?e.tool.goLogin():c&&c("服务器暂时没有相应，请稍后重试...")}})},batchOnsale:function(a,b,c){var d=this,f={ids:a.join(",")};$.ajax({url:host+"/product/batch-onsale",type:"POST",data:f,dataType:"json",success:function(a){a.errorCode==200?b&&b(a):c&&c(a.moreInfo)},error:function(a){a.status==401?e.tool.goLogin():c&&c("服务器暂时没有相应，请稍后重试...")}})},saveShopCommission:function(a,b,c){var d=this;$.ajax({url:host+"/shop/saveShopCommission",type:"POST",data:{commisionRate:a},dataType:"json",success:function(a){a.errorCode==200?b&&b(a):c&&c(a.moreInfo)},error:function(a){a.status==401?e.tool.goLogin():c&&c("服务器暂时没有相应，请稍后重试...")}})},saveThirdCommission:function(a,b,c){var d=this;$.ajax({url:host+"/shop/saveThirdCommission",type:"POST",data:a,dataType:"json",success:function(a){a.errorCode==200?b&&b(a):c&&c(a.moreInfo)},error:function(a){a.status==401?e.tool.goLogin():c&&c("服务器暂时没有相应，请稍后重试...")}})},getLogistics:function(a,b){$.ajax({url:host+"/logistics/list",type:"POST",dataType:"json",success:function(c){c.errorCode==200?a&&a(c):b&&b(c.moreInfo)},error:function(a){a.status==401?e.tool.goLogin():b&&b("获取快递公司失败！")}})},getProCateList:function(a,b,c,d,f){var g="",h=b||0;switch(a){case 1:g="/category/product/list",h=-1;break;case 2:g="/category/product/list";break;case 3:g="/shop/category/list";break;default:g="/category/product/list"}var i={page:0,size:8,id:h};$.extend(i,f),$.ajax({url:host+g,type:"POST",dataType:"json",data:i,success:function(a){a.errorCode==200?c&&c(a):d&&d(a.moreInfo)},error:function(a){a.status==401?e.tool.goLogin():d&&d("获取店铺分类信息失败！")}})},addProCate:function(a,b,c){$.ajax({url:host+"/shop/category/save",type:"POST",data:{name:a},dataType:"JSON",success:function(a){a.errorCode==200?b&&b(a):c&&c(a.moreInfo)},error:function(a){a.status==401?e.tool.goLogin():c&&c("获取店铺分类信息失败！")}})},removeProCate:function(a,b,c){$.ajax({url:host+"/shop/category/batchRemove",type:"POST",dataType:"json",traditional:!0,data:{ids:a},success:function(a){a.errorCode==200?b&&b(a):c&&c(a.moreInfo)},error:function(a){a.status==401?e.tool.goLogin():c&&c("获取店铺分类信息失败！")}})},changeProCate:function(a,b,c,d){$.ajax({url:host+"/category/product/add",type:"POST",dataType:"json",traditional:!0,data:{categoryId:a,productIds:b},success:function(a){a.errorCode==200?c&&c(a):d&&d(a.moreInfo)},error:function(a){a.status==401?e.tool.goLogin():d&&d("获取店铺分类信息失败！")}})},changeCateName:function(a,b,c,d){$.ajax({url:host+"/shop/category/batchUpdate",type:"POST",dataType:"json",traditional:!0,data:a,success:function(a){a.errorCode==200?b&&b(d):c&&c(a.moreInfo)},error:function(a){a.status==401?e.tool.goLogin():c&&c("修改店铺分类信息失败！")}})},getCategoryList:function(a,b,c){a.id==""&&(a={}),$.ajax({url:host+"/domain/category",type:"GET",dataType:"json",data:a,success:function(a){a.errorCode==200?b&&b(a):c&&c(a.moreInfo)},error:function(a){a.status==401?e.tool.goLogin():c&&c("服务器暂时没有相应，请稍后重试...")}})}},tool:{alert:function(a){var b=$("#J-KD-alert-msg"),c=$("#J-KD-alert"),d=$(".am-dimmer");b.text(a),c.modal({autoClose:!0,closeTime:3e3,onConfirm:function(){this.close()}})},confirm:function(a,b,c){var d=$("#J-KD-confirm-msg"),e=$("#J-KD-confirm");d.text(a),window.confirmFn=b,window.cancelFn=c,e.modal({relatedTarget:this,onConfirm:function(){window.confirmFn&&window.confirmFn($(this.relatedTarget)),this.close()},onCancel:function(){window.cancelFn&&window.cancelFn($(this.relatedTarget)),this.close()}})},getAbsUrl:function(a){var b=new Image;return b.src=a,a=b.src,b.src=null,a},request:function(a){var b=location.href,c=b.substring(b.indexOf("?")+1,b.length).split(/\&|\#/g),d={};for(i=0;j=c[i];i++)d[j.substring(0,j.indexOf("=")).toLowerCase()]=j.substring(j.indexOf("=")+1,j.length);var e=d[a.toLowerCase()];return typeof e=="undefined"?"":e},goLogin:function(a){a?e.tool.alert("退出成功～"):e.tool.alert("由于您长时间没有操作，请重新登录～"),setTimeout(function(){location.href="/sellerpc/pc/login.html"},1e3)},scoreStarShow:function(a){var b={trigger:".mod-score",font:"12px",colorS:"#f9b700",colorE:"#e9e9e9",scoreAll:5,scoreShow:0,eventClk:!0},c=$.extend(b,a),d="";for(var e=0;e<c.scoreAll;e++)e<Math.round(c.scoreShow)?d+='<em class="solid">&#xe620;</em>':d+='<em class="empty">&#xe61f;</em>';$(c.trigger).append(d),c.eventClk&&$(document).on("click",c.trigger+" em",function(){var a=$(this);if(a.next("em").hasClass("solid")||a.prev("em").hasClass("empty"))return!1;a.hasClass("solid")?a.removeClass("solid").addClass("empty").html("&#xe61f;"):a.removeClass("empty").addClass("solid").html("&#xe620;")})},getStringLength:function(b,c,d,e){var f=0,g=0;str_cut=new String,g=b.length;if(c=1){for(var h=0;h<g;h++)a=b.charAt(h),f++,escape(a).length>4&&f++;return f}if(c=2){for(var h=0;h<g;h++){a=b.charAt(h),f++,escape(a).length>4&&f++,str_cut=str_cut.concat(a);if(f>=d)return e&&e.length>0&&(str_cut=str_cut.concat(e)),str_cut}if(f<d)return b}}}};return e}),define("plugins/address",["jquery","base/utils","amaze"],function(a,b,c){function d(){}return d.prototype.init=function(a,b,c,d,e){var f=this;this.pro=b,this.city=c,this.district=d,this.leave=a;var e=e.province?e:{province:2,city:4};this.renderProvince(function(){e&&e.province&&(f.pro.find('option[value="'+e.province+'"]').attr("selected","selected"),f.pro.trigger("chosen:updated.chosen"),f.changePro())}),e&&e.province&&this.renderCity(e.province,function(){e&&e.city&&(f.city.find('option[value="'+e.city+'"]').attr("selected","selected"),f.city.trigger("chosen:updated.chosen"))}),f.leave==3&&e&&e.city&&this.renderDistrict(e.city,function(){e&&e.district&&(f.district.find('option[value="'+e.district+'"]').attr("selected","selected"),f.district.trigger("chosen:updated.chosen"))}),this.changePro(),f.leave==3&&this.changecity()},d.prototype.renderProvince=function(a){var c=this;b.api.address(1,function(b){c.pro.empty(),$.each(b.data,function(a,b){c.pro.append('<option value="'+b.id+'">'+b.name+"</option>")}),c.pro.find("option:eq(0)").attr("selected",!0),c.pro.trigger("chosen:updated.chosen"),a&&a()})},d.prototype.renderCity=function(a,c){var d=this;b.api.address(a,function(a){d.city.next(".chosen-container").show(),d.city.empty(),$.each(a.data,function(a,b){d.city.append('<option value="'+b.id+'">'+b.name+"</option>")}),d.city.find("option:eq(0)").attr("selected",!0),d.leave==3&&d.renderDistrict(d.city.find("option:eq(0)").attr("value")),d.city.trigger("chosen:updated.chosen"),c&&c()},function(){d.district&&d.district.empty().next(".chosen-container").hide(),d.city.empty().next(".chosen-container").hide(),d.city.trigger("chosen:updated.chosen"),d.leave==3&&d.district.trigger("chosen:updated.chosen")})},d.prototype.renderDistrict=function(a,c){var d=this;b.api.address(a,function(a){d.district.next(".chosen-container").show(),d.district.empty(),$.each(a.data,function(a,b){d.district.append('<option value="'+b.id+'">'+b.name+"</option>")}),d.district.find("option:eq(0)").attr("selected",!0),d.district.trigger("chosen:updated.chosen"),c&&c()},function(){d.district.empty().next(".chosen-container").hide(),d.district.trigger("chosen:updated.chosen")})},d.prototype.changePro=function(){var a=this;a.pro.on("change",function(){var b=a.pro.val();a.renderCity(b)})},d.prototype.changecity=function(){var a=this;a.city.on("change",function(){var b=a.city.val();a.leave==3&&a.renderDistrict(b)})},d}),define("base/orders/order-addressModify",["jquery","validate","base/utils","plugins/address"],function(a,b,c,d){function j(){var b=a("#form-buyerInfo");a.validator.addMethod("tel",function(a,b){var c=a.length;return this.optional(b)||c==11&&/^1[34578]{1}[0-9]{9}$/.test(a)},"请正确填写您的手机号码"),a.validator.addMethod("sectArea",function(b,c){return a(c).find("option").length&&b||!a(c).find("option").length&&!b},"请选择地区"),b.validate({debug:!0,focusInvalid:!0,onkeyup:!1,ignore:"",errorPlacement:function(a,b){a.appendTo(b.parents("li"))},submitHandler:function(b){a("#zoneId").val(Number(a("#sect_area").val())>0?a("#sect_area").val():Number(a("#sect_city").val())>0?a("#sect_city").val():a("#sect_province").val());var d={id:a("#orderAddId").val(),orderId:a("#orderId").val(),consignee:a("#J_buyerName").val(),phone:a("#J_buyerTel").val(),weixinId:a("#J_buyerChart").val(),zoneId:a("#zoneId").val(),street:a("#J_addCare").val()};a.ajax({url:host+"/openapi/order/updateOrderAddress",type:"POST",data:d,dataType:"json",success:function(b){console.log(b),a(".J_addressEditPop").modal("close"),b.errorCode==200?(c.tool.alert("修改成功！"),setTimeout(function(){location.reload()},200)):c.tool.alert(b.moreInfo)},error:function(a){a.status==401?c.tool.goLogin():c.tool.alert("服务器暂时没有相应，请稍后重试...")}})},rules:{J_buyerName:{required:!0,maxlength:100},J_buyerTel:{required:!0,tel:!0},J_buyerChart:{maxlength:40},J_addCare:{required:!0,maxlength:100},sect_province:{required:!0},sect_city:{sectArea:!0},sect_area:{sectArea:!0}},messages:{J_buyerName:{required:"姓名不能为空",maxlength:"最大长度不能超过100个字符"},J_buyerTel:{required:"电话不能为空",tel:"请输入正确的电话号码"},J_buyerChart:{maxlength:"微信号码不能超过40个字符"},J_addCare:{required:"收货地址要尽可能的详细",maxlength:"收货地址最长为100个字符"},sect_province:{required:"请选择省份"},sect_city:{sectArea:"请选择城市"},sect_area:{sectArea:"请选择地区"}}})}var e=a("#zoneId").val(),f=new d,g="",h="",i="";return c.api.getAddressParent(e,function(b){g=b.data[1].id,h="",i="",b.data.length==3&&(i=b.data[2].id),b.data.length==4&&(i=b.data[3].id),f.init(3,a("#sect_province"),a("#sect_city"),a("#sect_area"),{province:g,city:h,district:i})}),a(document).on("click","#J_addressEdit",function(){a(".J_addressEditPop label.error").hide(),a(".J_addressEditPop").modal({relatedTarget:this,width:"640",closeViaDimmer:!1,onConfirm:function(a){j()},onCancel:function(){this.close()}})}),null}),define("base/orders/order-rateModify",["jquery","validate","base/utils"],function(a,b,c){function d(){var a=$("#J_formRate");a.validate({debug:!0,focusInvalid:!0,onkeyup:!1,ignore:"",submitHandler:function(a){$("#J_post,#J_rate").blur();var b="/sellerpc/order/update-price",d={orderId:$("#J_orderId").val(),goodsFee:Number($("#J_rate").val()).toFixed(2),logisticsFee:Number($("#J_post").val()).toFixed(2)};$.ajax({url:b,data:d,type:"POST",cache:!1,dataType:"json",success:function(a){var b=a.logisticsFee.toFixed(2)==Number($("#J_post").val()).toFixed(2),d=a.totalFee.toFixed(2)==Number($("#J_realTotal").text().slice(1)).toFixed(2);if(b&&d){var e=$('table[data-orderid="'+a.id+'"]');e.attr({"data-logisticsfee":a.logisticsFee,"data-totalfee":a.totalFee,"data-paidfee":a.paidFee}),e.find(".col5 .paidfee").text("￥"+a.totalFee.toFixed(2)),e.find(".col5 .logisticsfee").text("（含运费:￥"+a.logisticsFee.toFixed(2)+"）"),$(".J_rateEditPop").modal("close"),c.tool.alert("改价成功！")}else c.tool.alert("改价失败！")},error:function(){c.tool.alert("改价失败！")}})},rules:{post:{required:!0,number:!0,min:0,max:999},rate:{required:!0,number:!0,min:0,max:99999e3,uneq:0}},messages:{post:{required:"邮费不能为空！",number:"输入不合法",min:"金额不能小于0",max:"金额不能大于999"},rate:{required:"总价不能为空！",number:"输入不合法",min:"金额不能小于0",max:"金额不能大于99999000",uneq:"商品价格不能为0"}}})}return $(document).on("click",".am-rateEdit",function(){var a=$(this),b=a.parents("table"),c=b.attr("data-orderid"),e=b.attr("data-goodsfee"),f=b.attr("data-paidfee")||b.attr("data-totalfee"),g=b.attr("data-logisticsfee")||"0.00",h=b.attr("data-discountfee")||"0.00",i=b.attr("data-commissionfee")||"0.00";$("#J_orderId").val(c),$("#J_post").val(g),$("#J_rate").val(e),$("#J_discount").text("￥"+h),$("#J_realTotal").text("￥"+f),$("#J_commission").text("￥"+i),$("#J_formRate label.error").hide(),$("#J_post,#J_rate").on("blur",function(){if(!isNaN(Number($("#J_post").val()))&&!isNaN(Number($("#J_rate").val()))){var a=(Number($("#J_post").val()).toFixed(2)*100+Number($("#J_rate").val()).toFixed(2)*100-Number(h)*100-Number(i)*100)/100;$("#J_realTotal").text("￥"+a.toFixed(2))}}),$(".J_rateEditPop").modal({relatedTarget:this,width:"320",closeViaDimmer:!1,onConfirm:function(a){d()},onCancel:function(){this.close()}})}),$.validator.addMethod("uneq",function(a,b,c){return a!=c},"not equal to"),null}),define("base/orders/order-goodsSend",["jquery","validate","base/utils"],function(a,b,c){function d(){var a=$("#J_formGoodsSends");a.validate({debug:!0,focusInvalid:!0,onkeyup:!1,ignore:"",submitHandler:function(a){var b="/sellerpc/order/shipped",d={orderId:$("#J_orderId").val(),logisticsOrderNo:$("#J_logisticsNo").val(),logisticsCompany:$("#J_kdSect").val()};$.ajax({url:b,data:d,type:"POST",cache:!1,dataType:"json",success:function(a){a?($(".J_goodsSendPop").modal("close"),c.tool.alert("发货成功！"),location.reload()):c.tool.alert("发货失败！")},error:function(){c.tool.alert("发货失败！")}})},rules:{logisticsNo:{required:!0,maxlength:50},kdSect:{required:!0}},messages:{logisticsNo:{required:"快运单号不能为空",maxlength:"快运单号不能超过50个字符"},kdSect:{required:"请选择快递公司"}},errorPlacement:function(a,b){a.appendTo(b.parent())}})}return c.api.getLogistics(function(a){var b="",c="";for(var d=0;d<a.data.length;d++){var e=a.data[d].name;switch(e){case"SF_EXPRESS":c="顺丰快递";break;case"YTO":c="圆通快递";break;case"STO":c="申通快递";break;case"ZTO":c="中通快递";break;case"BESTEX":c="百世汇通";break;case"YUNDA":c="韵达快递";break;case"TTKD":c="天天快递";break;case"QFKD":c="全峰快递";break;case"ZJS":c="宅急送";break;case"EMS":c="邮政EMS";break;case"OTHER":c="其他";break;default:c="其他"}b+='<option value="'+a.data[d].name+'">'+c+"</option>"}$("#J_kdSect").append(b),$("#J_kdSect").trigger("chosen:updated.chosen")}),$(document).on("click",".am-goodsSendPop",function(){var a=$(this),b=a.parents("table"),c=b.attr("data-orderid");$("#J_orderId").val(c),$("#J_formGoodsSends label.error").hide(),$(".J_goodsSendPop").modal({relatedTarget:this,width:"320",closeViaDimmer:!1,onConfirm:function(a){d()},onCancel:function(){this.close()}})}),null}),define("base/orders/order-cancel",["jquery","base/utils"],function(a,b){return $(document).on("click",".am-btnCancel",function(){b.tool.confirm.call(this,"确定要取消本订单吗？",function(a){var c=a.parents("table"),d=c.attr("data-orderid"),e="/sellerpc/order/cancel?orderId="+d;$.ajax({url:e,type:"POST",cache:!1,dataType:"json",success:function(a){a?(b.tool.alert("订单取消成功！"),location.reload()):b.tool.alert("订单取消失败！")},error:function(){b.tool.alert("订单取消失败！")}})})}),null}),define("base/orders/pro-reply",["jquery","base/utils","doT"],function(a,b,c){var d={init:function(){var a=$("#orderId").val();$.ajax({url:host+"/comment/list?orderId="+a,type:"POST",dataType:"json",success:function(a){if(a.data.length){var d=$(".dot-replyTemplate").html(),e=c.template(d);$(".pannel-reply").html(e(a)),$(".reply-item .mod-score").each(function(a,c){b.tool.scoreStarShow({trigger:c,scoreShow:$(c).data("score"),eventClk:!1})})}else $(".pannel-reply").hide()},error:function(a){a.status==401?b.tool.goLogin():b.tool.alert("服务器暂时没有相应，请稍后重试...")}}),this.handle()},handle:function(){$(document).on("click",".am-replay",function(){var a=$(this);a.parents(".item-contents").next(".item-reply").toggleClass("am-hide");if(!a.parents(".item-contents").next(".item-reply").hasClass("am-hide")){var b=$(window).scrollTop();$("html,body").animate({scrollTop:b+100},100),a.parents(".reply-item").find(".editArea").focus()}}),$(document).on("click",".am-submitReplay",function(){var a=$(this);if(a.hasClass("am-replyed"))b.tool.confirm.call(a,"确定要删除回复吗？",function(c){var d={id:c.parents(".reply-item").attr("data-id")},e=host+"/comment/removeReplay";$.ajax({url:e,type:"POST",data:d,cache:!1,dataType:"json",success:function(c){c.errorCode==200?(b.tool.alert("评论删除成功！"),a.text("提交回复").removeClass("am-replyed"),a.parents(".reply-item").find(".reply-tip").removeClass("am-hide"),a.parents(".reply-item").find(".editArea").html("").removeClass("edit-disabeld").attr("contenteditable","true"),a.parents(".reply-item").find(".item-reply").addClass("am-hide")):b.tool.alert(c.moreInfo)},error:function(){b.tool.alert("删除评论失败！")}})});else{var c=$.trim(a.siblings(".editArea").text()),d={id:a.parents(".reply-item").attr("data-id"),reply:c},e=host+"/comment/reply";c?$.ajax({url:e,type:"POST",data:d,cache:!1,dataType:"json",success:function(c){c.errorCode==200?(b.tool.alert("评论提交成功！"),a.text("删除回复").addClass("am-replyed"),a.parents(".reply-item").find(".reply-tip").addClass("am-hide"),a.parents(".reply-item").find(".editArea").addClass("edit-disabeld").removeAttr("contenteditable")):b.tool.alert(c.moreInfo)},error:function(){b.tool.alert("评论提交失败！")}}):(b.tool.alert("评论信息不能为空！"),setTimeout(function(){a.siblings(".editArea").focus()},100))}})}};return d.init(),null}),require(["base/orders/order-addressModify"]),require(["base/orders/order-rateModify"]),require(["base/orders/order-goodsSend"]),require(["base/orders/order-cancel"]),require(["base/orders/pro-reply"]),require(["jquery","base/utils","plugins/address"],function(a,b,c){var d={init:function(){}};d.init()}),define("base/order-detail",function(){})